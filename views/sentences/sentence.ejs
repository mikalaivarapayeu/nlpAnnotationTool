<% layout('layout/boilerplate') %>
    <section class="border-top border-bottom border-primary px-1 py-2 mb-3" id="labels">
        <div>
            <h5 class="d-inline me-3 ">Syntactic labels:</h5>
            <div class="d-inline" id="syntactic">
                <ul class="list-inline d-inline">
                    <% for (let i=0; i<labels[0].phraseLabels.length; i++) {%>
                        <% if (i===0) {%>
                            <li class="list-inline-item activeLabel">
                                <%= labels[0].phraseLabels[i].name%>
                            </li>
                            <% } else {%>
                                <li class="list-inline-item">
                                    <%= labels[0].phraseLabels[i].name%>
                                </li>
                                <%} }%>

                </ul>
            </div>
        </div>
    </section>
    <section class="px-1" id="mainAnnotationArea">
        <h5>Annotation Area</h5>
        <div class="row border-bottom border-primary mb-2">
            <div class="col col-md-1">
                <h6>Sentence Number</h6>
            </div>
            <div class="col col-md-7 d-flex justify-content-center">
                <h6>Sentence</h6>
            </div>
            <div class="col col-md-2">
                <h6> Semantic Tags</h6>
            </div>
            <div class="col col-md-1">
                <h6>Extract Words?</h6>
            </div>
            <div class="col col-md-1">
                <h6>Self contained?</h6>
            </div>
        </div>
        <% for (let sent of sentences.results) {%>
            <div class="row mr-2 mb-3 border-bottom border-primary sents" id="<%=sent._id %>">
                <div class="col col-md-8 my-2 ">
                    <p class="sentPlace">
                        <%=sent.sentNumber %>
                            <% for (let i=0; i< sent.sentWords.length; i++) {%>
                                <% if( sent.sentWords[i][1]==='none' ) {%>
                                    <span data-widx="<%=i %>" class="word">
                                        <%= sent.sentWords[i][0] %>
                                    </span>
                                    <% } else {%>
                                        <span class="taggedSpan">
                                            <span class="taggedWord word" data-widx="<%=i %>">
                                                <%=sent.sentWords[i][0] %>
                                            </span>
                                            <span class="taggedLabel">
                                                <%=sent.sentWords[i][1] %>
                                            </span>
                                        </span>
                                        <% }}%>
                    </p>
                    <div class="sentAnnotNav">
                        <button class="btn btn-primary updateSentence">Update Annotation</button>
                        <a class=" btn btn-primary d-inline "
                            href="sents/duplicate/<%=sent._id %>?page=<%=page %>">Duplicate
                            Sentence</a>
                        <a class="btn btn-primary d-inline" href="sents/<%=sent._id %>?page=<%=page %>">Sentence
                            Details</a>
                        <form action="sents/<%=sent._id %>?_method=DELETE&page=<%=page %>" method="POST"
                            class="d-inline">
                            <button class="btn btn-primary">Delete Sentence</button>
                        </form>
                    </div>
                </div>
                <div class="col col-md-2">
                    <div class="semanticLabel">
                        <div class="semanticTagSelection">
                            <select class="form-select form-select-sm" name="semanticTags">
                                <% for (let i=0; i<labels[0].semanticLabels.length; i++) {%>
                                    <% if (labels[0].semanticLabels[i].name===sent.semanticLabel ) {%>
                                        <option value=<%=labels[0].semanticLabels[i].name %> selected>
                                            <%=labels[0].semanticLabels[i].name%>
                                        </option>
                                        <% } else { %>
                                            <option value=<%=labels[0].semanticLabels[i].name %>>
                                                <%=labels[0].semanticLabels[i].name%>
                                            </option>
                                            <% }}%>
                            </select>
                        </div>
                        <p class="semTagPlaceHolder">
                            <span>
                                <%= sent.semanticLabel %>
                            </span>
                        </p>
                    </div>
                </div>
                <div class=" col col-md-1">
                    <div class="extractable">
                        <div class="extractionSelection">
                            <select class="form-select form-select-sm" name="wordExtrationBool">
                                <% if (sent.isExtractable) {%>
                                    <option value="true" selected>Yes</option>
                                    <option value="false">No</option>
                                    <% } else {%>
                                        <option value="true">Yes</option>
                                        <option value="false" selected>No</option>
                                        <% } %>
                            </select>
                        </div>
                        <p class="extractablePlaceHolder">
                            <span>
                                <% if (sent.isExtractable) {%>
                                    Yes
                                    <% } else {%>
                                        No
                                        <% } %>
                            </span>
                        </p>
                    </div>
                </div>
                <div class="col col-md-1">
                    <div class="isSelfContained">
                        <div class="isSelfContainedSelection">
                            <select class="form-select form-select-sm" name="isSelfContainedSelect">
                                <% if (sent.isSelfContanined) {%>
                                    <option value="true" selected>Yes</option>
                                    <option value="false">No</option>
                                    <% } else {%>
                                        <option value="true">Yes</option>
                                        <option value="false" selected>No</option>
                                        <% } %>
                            </select>
                        </div>
                        <p class="containedPlaceHolder">
                            <span>
                                <% if ( sent.isSelfContanined) {%>
                                    Yes
                                    <% } else {%>
                                        No
                                        <% } %>
                            </span>
                        </p>
                    </div>
                </div>
            </div>
            <% }%>
    </section>
    <section>
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                <% if (page> 1) { %>
                    <li class="page-item"><a class="page-link" href="/sents?page=<%=page-1 %>">Previous</a></li>
                    <li class="page-item active"><a class="page-link" href="/sents?page=<%=page %>">
                            <%=page%>
                        </a></li>
                    <% } else { %>
                        <li class="page-item active"><a class="page-link" href="/sents?page=<%=page %>">1</a></li>

                        <% } %>
                            <li class="page-item"><a class="page-link" href="/sents?page=<%=page+1 %>">
                                    <%=page+1%>
                                </a></li>
                            <li class="page-item"><a class="page-link" href="/sents?page=<%=page+2 %>">
                                    <%=page+2%>
                                </a></li>
                            <% if (sentences.next) { %>
                                <li class="page-item"><a class="page-link" href="/sents?page=<%=page+3 %>">Next</a></li>
                                <% } %>

            </ul>
        </nav>
    </section>
    <script src=" https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script src="/javascripts/annotation.js"></script>